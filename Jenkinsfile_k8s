def principalBranch = 'main'

parallel(
  failFast: false,
  'maven-jdk8': {
     buildDockerAndPublishImage('inbound-agent-maven:jdk8', [
      dockerfile: 'maven/jdk8/Dockerfile',
      useContainer: false,
    ])
  },
  'maven-jdk8-nanoserver': {
     buildDockerAndPublishImage('inbound-agent-maven:jdk8-nanoserver', [
      dockerfile: 'maven/jdk8/Dockerfile.nanoserver',
      agentLabels: 'windows',
      platform: 'windows/amd64',
      useContainer: false,
    ])
  },
  'maven-jdk8-test': {
     buildDockerAndPublishImage('inbound-agent-maven:jdk8-test', [
      dockerfile: 'maven/jdk8/Dockerfile.test',
      agentLabels: 'windows',
      platform: 'windows/amd64',
      useContainer: false,
    ])
  },
)
