@Library('pipeline-library@pull/372/head') _

def principalBranch = 'main'

parallel(
  failFast: false,
  'maven-jdk8': {
     buildDockerAndPublishImage('inbound-agent-maven:jdk8', [
      mainBranch: principalBranch,
      dockerfile: 'maven/jdk8/Dockerfile',
      useContainer: false,
    ])
  },
  'maven-jdk8-nanoserver': {
     buildDockerAndPublishImage('inbound-agent-maven:jdk8-nanoserver', [
      dockerfile: 'maven/jdk8/Dockerfile.nanoserver',
      mainBranch: principalBranch,
      agentLabels: 'windows',
      useContainer: false,
    ])
  },
)
